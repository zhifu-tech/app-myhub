# Datastore Module

## ğŸ“‹ æ¦‚è¿°

`core:datastore` æ¨¡å—æ˜¯ MyHub åº”ç”¨çš„æ•°æ®å±‚ï¼Œè´Ÿè´£æ‰€æœ‰æ•°æ®ç›¸å…³çš„æ“ä½œï¼ŒåŒ…æ‹¬æœ¬åœ°å­˜å‚¨ã€ç½‘ç»œè¯·æ±‚ã€æ•°æ®æ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘ã€‚

> **æ³¨æ„**ï¼šæ¨¡å—å·²ä» `core:data` é‡å‘½åä¸º `core:datastore`ï¼ŒåŒ…åä» `tech.zhifu.app.myhub.data` é‡å‘½åä¸º `tech.zhifu.app.myhub.datastore`ã€‚

## ğŸ“š æ–‡æ¡£

- **[æ¶æ„è®¾è®¡æ–‡æ¡£](./docs/datastore_architecture.md)** - è¯¦ç»†çš„æ•°æ®æ¨¡å‹æ¶æ„è®¾è®¡æ–‡æ¡£
- **[å¾…åŠäº‹é¡¹](./docs/datastore_todos.md)** - æ•°æ®å±‚å¾…åŠäº‹é¡¹å’ŒåŠŸèƒ½å®Œå–„è®¡åˆ’
- **[æµ‹è¯•æŒ‡å—](./docs/datastore_test_guide.md)** - æ•°æ®åº“æµ‹è¯•æŒ‡å—

## ğŸ—ï¸ æ¨¡å—èŒè´£

- **æ•°æ®æ¨¡å‹**ï¼šå®šä¹‰åº”ç”¨çš„æ ¸å¿ƒæ•°æ®æ¨¡å‹ï¼ˆCardã€Tagã€Templateã€Userã€Statistics ç­‰ï¼‰
- **æ•°æ®æº**ï¼šå®ç°æœ¬åœ°æ•°æ®æºï¼ˆSQLDelightï¼‰å’Œè¿œç¨‹æ•°æ®æºï¼ˆKtor Clientï¼‰
- **ä»“åº“å±‚**ï¼šå®ç°ä¸šåŠ¡é€»è¾‘å±‚ï¼Œåè°ƒæœ¬åœ°å’Œè¿œç¨‹æ•°æ®æº
- **æ•°æ®åº“**ï¼šç®¡ç† SQLDelight æ•°æ®åº“é…ç½®å’Œè¿ç§»
- **ç½‘ç»œå±‚**ï¼šç®¡ç† Ktor Client é…ç½®å’Œ API è°ƒç”¨
- **ä¾èµ–æ³¨å…¥**ï¼šæä¾› Koin æ¨¡å—é…ç½®
- **Web å¹³å°é…ç½®**ï¼šç®¡ç† Webpack å’Œ Karma é…ç½®ï¼ˆSQL.js ç›¸å…³ï¼‰

## ğŸ“ ç›®å½•ç»“æ„

```
core/datastore/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ commonMain/
â”‚   â”‚   â”œâ”€â”€ kotlin/tech/zhifu/app/myhub/datastore/
â”‚   â”‚   â”‚   â”œâ”€â”€ model/              # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/                # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚   â”œâ”€â”€ datasource/         # æ•°æ®æºæ¥å£å’Œå®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/         # ä»“åº“æ¥å£å’Œå®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ di/                 # Koin æ¨¡å—é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ network/            # ç½‘ç»œé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ database/           # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ ui/                 # UI çŠ¶æ€æ¨¡å‹
â”‚   â”‚   â””â”€â”€ sqldelight/             # SQLDelight Schema
â”‚   â”œâ”€â”€ androidMain/                # Android å¹³å°ç‰¹å®šå®ç°
â”‚   â”œâ”€â”€ iosMain/                    # iOS å¹³å°ç‰¹å®šå®ç°
â”‚   â”œâ”€â”€ jsMain/                     # Web å¹³å°ç‰¹å®šå®ç°
â”‚   â”œâ”€â”€ jvmMain/                    # Desktop å¹³å°ç‰¹å®šå®ç°
â”‚   â””â”€â”€ [platform]Test/             # å„å¹³å°æµ‹è¯•ä»£ç 
â””â”€â”€ build.gradle.kts
```

## ğŸ”— ä¾èµ–å…³ç³»

### ä¾èµ–çš„æ¨¡å—

- `core:platform` - å¹³å°æŠ½è±¡ï¼ˆå¦‚ SERVER_PORT å¸¸é‡ï¼‰

### è¢«ä¾èµ–çš„æ¨¡å—

- `composeApp` - ä¸»åº”ç”¨æ¨¡å—ä½¿ç”¨ datastore æ¨¡å—æä¾›çš„ Repository å’Œ Model

## ğŸ“¦ æä¾›çš„åŠŸèƒ½

### æ•°æ®æ¨¡å‹

- `Card` - å¡ç‰‡å®ä½“
- `Tag` - æ ‡ç­¾å®ä½“
- `Template` - æ¨¡æ¿å®ä½“
- `User` - ç”¨æˆ·å®ä½“
- `Statistics` - ç»Ÿè®¡ä¿¡æ¯
- `SearchFilter` - æœç´¢ç­›é€‰æ¡ä»¶

### Repository

- `CardRepository` - å¡ç‰‡ä»“åº“
- `TagRepository` - æ ‡ç­¾ä»“åº“
- `TemplateRepository` - æ¨¡æ¿ä»“åº“
- `UserRepository` - ç”¨æˆ·ä»“åº“
- `StatisticsRepository` - ç»Ÿè®¡ä¿¡æ¯ä»“åº“

### Koin æ¨¡å—

- `databaseModule` - æ•°æ®åº“æ¨¡å—
- `networkModule` - ç½‘ç»œæ¨¡å—
- `dataModule` - æ•°æ®æºå’Œä»“åº“æ¨¡å—

## ğŸ§ª æµ‹è¯•

æ‰€æœ‰æ•°æ®å±‚çš„æ ¸å¿ƒç»„ä»¶éƒ½æœ‰å®Œæ•´çš„å•å…ƒæµ‹è¯•ï¼Œå‚è§ `src/commonTest` ç›®å½•ã€‚

æµ‹è¯•æ–‡æ¡£ï¼šå‚è§ [`docs/datastore_test_guide.md`](./docs/datastore_test_guide.md)

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- [æ¶æ„è®¾è®¡æ–‡æ¡£](./docs/datastore_architecture.md) - è¯¦ç»†çš„æ•°æ®æ¨¡å‹æ¶æ„è®¾è®¡æ–‡æ¡£
- [å¾…åŠäº‹é¡¹](./docs/datastore_todos.md) - æ•°æ®å±‚å¾…åŠäº‹é¡¹å’ŒåŠŸèƒ½å®Œå–„è®¡åˆ’

---

**æœ€åæ›´æ–°**: 2025-12-24  
**ç»´æŠ¤è€…**: MyHub Team

